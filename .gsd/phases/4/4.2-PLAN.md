# Execution Plan: Phase 4, Plan 4.2 (Session Save API Route)

## Objective
Create the backend Next.js API route that ingests the payload generated by the Confidence Coach UI and saves the statistics into MongoDB.

## Context
We need a secure `POST` route that authenticates the user, parses the JSON payload, and modifies their Mongoose document.

## Execution Steps
1. Create file `app/api/confidence-coach/session/route.js`.
2. Extract the authenticated session (e.g., via NextAuth `getServerSession`).
3. Parse the `req.body` to retrieve `finalScore` and `timeTaken`.
4. Fetch the `User` document from the database.
5. Apply a rolling average formula to update `confidenceCoachStats.averageScore`.
6. Increment `confidenceCoachStats.sessionsCompleted` by 1.
7. Add `timeTaken / 60` to `confidenceCoachStats.voiceTrainingMinutes`.
8. Update `confidenceCoachStats.lastSessionDate = new Date()`.
9. Save the document and return `{ success: true }`.
